(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9907:function(e,s,a){Promise.resolve().then(a.bind(a,531))},531:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return eG}});var t=a(7821),r=a(8078),i=a(2605),n=a(1638);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,n.m6)((0,i.W)(s))}let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:l("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});c.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:l("flex flex-col space-y-1.5 p-6",a),...r})});d.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:l("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:l("text-sm text-muted-foreground",a),...r})});h.displayName="CardDescription";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:l("p-6 pt-0",a),...r})});m.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:l("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var u=a(7035),x=a(898);let p=(0,x.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:n=!1,...c}=e,d=n?u.g7:"button";return(0,t.jsx)(d,{className:l(p({variant:r,size:i,className:a})),ref:s,...c})});g.displayName="Button";let j=(0,x.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:l(j({variant:a}),s),...r})}var v=a(4207);let N=v.fC,y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(v.aV,{ref:s,className:l("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});y.displayName=v.aV.displayName;let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(v.xz,{ref:s,className:l("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});b.displayName=v.xz.displayName;let w=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(v.VY,{ref:s,className:l("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});w.displayName=v.VY.displayName;let C=a(2949).env.NEXT_PUBLIC_API_URL||"http://localhost:5001";class k{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat(C).concat(e),t=await fetch(a,{headers:{"Content-Type":"application/json",...s.headers},...s});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return{data:await t.json()}}catch(e){return console.error("API request failed:",e),{error:e instanceof Error?e.message:"Unknown error"}}}async getCampaigns(){return this.request("/campaigns")}async getCampaign(e){return this.request("/campaigns/".concat(e))}async createCampaign(e){return this.request("/campaigns",{method:"POST",body:JSON.stringify(e)})}async updateCampaign(e,s){return this.request("/campaigns/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteCampaign(e){return this.request("/campaigns/".concat(e),{method:"DELETE"})}async getCharacters(){return this.request("/characters")}async getCharacter(e){return this.request("/characters/".concat(e))}async createCharacter(e){return this.request("/characters",{method:"POST",body:JSON.stringify(e)})}async updateCharacter(e,s){return this.request("/characters/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteCharacter(e){return this.request("/characters/".concat(e),{method:"DELETE"})}async getSessions(){return this.request("/sessions")}async getSession(e){return this.request("/sessions/".concat(e))}async createSession(e){return this.request("/sessions",{method:"POST",body:JSON.stringify(e)})}async updateSession(e,s){return this.request("/sessions/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteSession(e){return this.request("/sessions/".concat(e),{method:"DELETE"})}async getLocations(){return this.request("/locations")}async getLocation(e){return this.request("/locations/".concat(e))}async createLocation(e){return this.request("/locations",{method:"POST",body:JSON.stringify(e)})}async updateLocation(e,s){return this.request("/locations/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteLocation(e){return this.request("/locations/".concat(e),{method:"DELETE"})}async startGameSession(e){return this.request("/gameplay/start-session",{method:"POST",body:JSON.stringify(e)})}async sendGameMessage(e){return this.request("/gameplay/message",{method:"POST",body:JSON.stringify(e)})}async performAction(e){return this.request("/gameplay/action",{method:"POST",body:JSON.stringify(e)})}async initiateCombat(e){return this.request("/combat/initiate",{method:"POST",body:JSON.stringify(e)})}async performCombatAction(e){return this.request("/combat/action",{method:"POST",body:JSON.stringify(e)})}async getQuests(){return this.request("/quests")}async createQuest(e){return this.request("/quests",{method:"POST",body:JSON.stringify(e)})}async updateQuest(e,s){return this.request("/quests/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async healthCheck(){return this.request("/health")}}let S=new k,D=[{id:"1",name:"The Lost Mines of Phandelver",description:"A classic adventure for new heroes seeking fame and fortune in the dangerous ruins of an ancient dwarven mine.",setting:"Forgotten Realms",isActive:!0,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20"),sessions:[]},{id:"2",name:"Curse of Strahd",description:"A gothic horror adventure in the mist-shrouded realm of Barovia, ruled by the vampire lord Strahd von Zarovich.",setting:"Ravenloft",isActive:!0,createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-02-01"),sessions:[]},{id:"3",name:"Dragon Heist",description:"Urban intrigue and treasure hunting in the great city of Waterdeep.",setting:"Waterdeep",isActive:!1,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-10"),sessions:[]}],A=[{id:"1",campaignId:"1",name:"Thorin Ironforge",race:"Dwarf",class:"Fighter",level:3,alignment:"Lawful Good",background:"Soldier",hitPoints:{current:28,maximum:32},armorClass:18,proficiencyBonus:2,stats:{strength:16,dexterity:12,constitution:15,intelligence:10,wisdom:13,charisma:8},skills:["Athletics","Intimidation","Perception","Survival"],equipment:["Warhammer","Chain Mail","Shield","Handaxe","Explorer's Pack"],createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",campaignId:"1",name:"Elara Moonwhisper",race:"Elf",class:"Wizard",level:2,alignment:"Neutral Good",background:"Sage",hitPoints:{current:12,maximum:14},armorClass:12,proficiencyBonus:2,stats:{strength:8,dexterity:14,constitution:13,intelligence:16,wisdom:12,charisma:11},skills:["Arcana","History","Investigation","Medicine"],equipment:["Quarterstaff","Dagger","Spellbook","Scholar's Pack","Component Pouch"],spells:["Magic Missile","Shield","Detect Magic","Identify","Sleep"],createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")},{id:"3",campaignId:"2",name:"Finn Lightfinger",race:"Halfling",class:"Rogue",level:2,alignment:"Chaotic Neutral",background:"Criminal",hitPoints:{current:16,maximum:16},armorClass:14,proficiencyBonus:2,stats:{strength:10,dexterity:16,constitution:12,intelligence:13,wisdom:11,charisma:14},skills:["Stealth","Sleight of Hand","Deception","Thieves' Tools","Acrobatics"],equipment:["Shortsword","Shortbow","Leather Armor","Thieves' Tools","Burglar's Pack"],createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-20")}],I=[{id:"1",campaignId:"1",name:"Phandalin",type:"city",description:"A small frontier town built on the ruins of a much older settlement. The town consists of forty or fifty simple log buildings, some built on old fieldstone foundations.",inhabitants:["Toblen Stonehill","Sister Garaele","Harbin Wester","Barthen"],connections:["2","3"],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"2",campaignId:"1",name:"Cragmaw Hideout",type:"dungeon",description:"A cave complex hidden in the woods, serving as a base for the Cragmaw goblins. The entrance is concealed behind a thicket of trees.",inhabitants:["Klarg","Yeemik","Sildar Hallwinter"],connections:["1"],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"3",campaignId:"1",name:"Tresendar Manor Ruins",type:"dungeon",description:"The ruins of an old manor house, now serving as a secret base for the Redbrands. Hidden beneath are ancient crypts and tunnels.",inhabitants:["Glasstaff","Redbrand Ruffians","Nothic"],connections:["1"],createdAt:new Date("2024-01-16"),updatedAt:new Date("2024-01-16")},{id:"4",campaignId:"1",name:"Stonehill Inn",type:"building",description:"A modest roadhouse of fieldstone and rough-hewn timbers. The inn smells of ale and roasted meat, and raucous laughter can be heard through the walls.",inhabitants:["Toblen Stonehill","Trilena Stonehill"],connections:["1"],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"5",campaignId:"1",name:"Neverwinter Wood",type:"wilderness",description:"A large forest that stretches for miles, filled with ancient trees, hidden paths, and dangerous creatures. Many secrets lie within its depths.",inhabitants:["Owlbears","Wolves","Bandits","Wood Elves"],connections:["1","2"],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"6",campaignId:"2",name:"Village of Barovia",type:"city",description:"A grim village shrouded in perpetual mist, where the locals live in fear of their dark lord. The streets are eerily quiet, and shadows seem to move on their own.",inhabitants:["Ismark Kolyanovich","Ireena Kolyana","Mad Mary","Bildrath"],connections:[],createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-02-01")}],P=[{id:"s1",campaignId:"1",name:"Goblin Ambush",description:"The party encounters goblins on the road to Phandalin",date:new Date("2024-01-20"),isCompleted:!0,notes:"Party successfully defeated the goblins and rescued Sildar",sessionNumber:1,isActive:!1,createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20"),summary:"The heroes began their journey and faced their first challenge on the road."},{id:"s2",campaignId:"1",name:"Cragmaw Hideout",description:"Infiltrating the goblin stronghold",date:new Date("2024-01-27"),isCompleted:!1,sessionNumber:2,isActive:!1,createdAt:new Date("2024-01-27"),updatedAt:new Date("2024-01-27")},{id:"s3",campaignId:"2",name:"Death House",description:"The party explores the haunted mansion",date:new Date("2024-02-03"),isCompleted:!1,sessionNumber:1,isActive:!1,createdAt:new Date("2024-02-03"),updatedAt:new Date("2024-02-03")},{id:"s4",campaignId:"1",name:"Phandalin Troubles",description:"Investigating the Redbrands and their activities in town",date:new Date("2024-02-10"),isCompleted:!1,sessionNumber:3,isActive:!0,createdAt:new Date("2024-02-10"),updatedAt:new Date("2024-02-10")}];class Z{setCache(e,s){this.cache.set(e,{data:s,timestamp:Date.now()})}getCache(e){let s=this.cache.get(e);return s?Date.now()-s.timestamp>this.cacheTimeout?(this.cache.delete(e),null):s.data:null}clearCache(){this.cache.clear()}async getCampaigns(){if(this.useMockData)return D;let e=this.getCache("campaigns");if(e)return e;try{let e=await S.getCampaigns();if(e.data)return this.setCache("campaigns",e.data),e.data;throw Error(e.error||"Failed to fetch campaigns")}catch(e){return console.error("Failed to fetch campaigns from API, using mock data:",e),D}}async getCampaign(e){if(this.useMockData)return D.find(s=>s.id===e)||null;let s=this.getCache("campaign-".concat(e));if(s)return s;try{let s=await S.getCampaign(e);if(s.data)return this.setCache("campaign-".concat(e),s.data),s.data;throw Error(s.error||"Failed to fetch campaign")}catch(s){return console.error("Failed to fetch campaign from API, using mock data:",s),D.find(s=>s.id===e)||null}}async createCampaign(e){if(this.useMockData){let s={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date,sessions:[]};return D.push(s),this.clearCache(),s}try{let s=await S.createCampaign(e);if(s.data)return this.clearCache(),s.data;throw Error(s.error||"Failed to create campaign")}catch(e){throw console.error("Failed to create campaign via API:",e),e}}async updateCampaign(e,s){if(this.useMockData){let a=D.findIndex(s=>s.id===e);if(-1===a)throw Error("Campaign not found");let t={...D[a],...s,updatedAt:new Date};return D[a]=t,this.clearCache(),t}try{let a=await S.updateCampaign(e,s);if(a.data)return this.clearCache(),a.data;throw Error(a.error||"Failed to update campaign")}catch(e){throw console.error("Failed to update campaign via API:",e),e}}async deleteCampaign(e){if(this.useMockData){let s=D.findIndex(s=>s.id===e);-1!==s&&(D.splice(s,1),this.clearCache());return}try{let s=await S.deleteCampaign(e);if(s.error)throw Error(s.error);this.clearCache()}catch(e){throw console.error("Failed to delete campaign via API:",e),e}}async getCharacters(){if(this.useMockData)return A;let e=this.getCache("characters");if(e)return e;try{let e=await S.getCharacters();if(e.data)return this.setCache("characters",e.data),e.data;throw Error(e.error||"Failed to fetch characters")}catch(e){return console.error("Failed to fetch characters from API, using mock data:",e),A}}async getCharacter(e){if(this.useMockData)return A.find(s=>s.id===e)||null;let s=this.getCache("character-".concat(e));if(s)return s;try{let s=await S.getCharacter(e);if(s.data)return this.setCache("character-".concat(e),s.data),s.data;throw Error(s.error||"Failed to fetch character")}catch(s){return console.error("Failed to fetch character from API, using mock data:",s),A.find(s=>s.id===e)||null}}async createCharacter(e){if(this.useMockData){let s={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return A.push(s),this.clearCache(),s}try{let s=await S.createCharacter(e);if(s.data)return this.clearCache(),s.data;throw Error(s.error||"Failed to create character")}catch(e){throw console.error("Failed to create character via API:",e),e}}async updateCharacter(e,s){if(this.useMockData){let a=A.findIndex(s=>s.id===e);if(-1===a)throw Error("Character not found");let t={...A[a],...s,updatedAt:new Date};return A[a]=t,this.clearCache(),t}try{let a=await S.updateCharacter(e,s);if(a.data)return this.clearCache(),a.data;throw Error(a.error||"Failed to update character")}catch(e){throw console.error("Failed to update character via API:",e),e}}async deleteCharacter(e){if(this.useMockData){let s=A.findIndex(s=>s.id===e);-1!==s&&(A.splice(s,1),this.clearCache());return}try{let s=await S.deleteCharacter(e);if(s.error)throw Error(s.error);this.clearCache()}catch(e){throw console.error("Failed to delete character via API:",e),e}}async getLocations(){if(this.useMockData)return I;let e=this.getCache("locations");if(e)return e;try{let e=await S.getLocations();if(e.data)return this.setCache("locations",e.data),e.data;throw Error(e.error||"Failed to fetch locations")}catch(e){return console.error("Failed to fetch locations from API, using mock data:",e),I}}async getLocation(e){if(this.useMockData)return I.find(s=>s.id===e)||null;let s=this.getCache("location-".concat(e));if(s)return s;try{let s=await S.getLocation(e);if(s.data)return this.setCache("location-".concat(e),s.data),s.data;throw Error(s.error||"Failed to fetch location")}catch(s){return console.error("Failed to fetch location from API, using mock data:",s),I.find(s=>s.id===e)||null}}async createLocation(e){if(this.useMockData){let s={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return I.push(s),this.clearCache(),s}try{let s=await S.createLocation(e);if(s.data)return this.clearCache(),s.data;throw Error(s.error||"Failed to create location")}catch(e){throw console.error("Failed to create location via API:",e),e}}async updateLocation(e,s){if(this.useMockData){let a=I.findIndex(s=>s.id===e);if(-1===a)throw Error("Location not found");let t={...I[a],...s,updatedAt:new Date};return I[a]=t,this.clearCache(),t}try{let a=await S.updateLocation(e,s);if(a.data)return this.clearCache(),a.data;throw Error(a.error||"Failed to update location")}catch(e){throw console.error("Failed to update location via API:",e),e}}async deleteLocation(e){if(this.useMockData){let s=I.findIndex(s=>s.id===e);-1!==s&&(I.splice(s,1),this.clearCache());return}try{let s=await S.deleteLocation(e);if(s.error)throw Error(s.error);this.clearCache()}catch(e){throw console.error("Failed to delete location via API:",e),e}}async getSessions(){if(this.useMockData)return P;let e=this.getCache("sessions");if(e)return e;try{let e=await S.getSessions();if(e.data)return this.setCache("sessions",e.data),e.data;throw Error(e.error||"Failed to fetch sessions")}catch(e){return console.error("Failed to fetch sessions from API, using mock data:",e),P}}async getSession(e){if(this.useMockData)return P.find(s=>s.id===e)||null;let s=this.getCache("session-".concat(e));if(s)return s;try{let s=await S.getSession(e);if(s.data)return this.setCache("session-".concat(e),s.data),s.data;throw Error(s.error||"Failed to fetch session")}catch(s){return console.error("Failed to fetch session from API, using mock data:",s),P.find(s=>s.id===e)||null}}async createSession(e){if(this.useMockData){let s={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return P.push(s),this.clearCache(),s}try{let s=await S.createSession(e);if(s.data)return this.clearCache(),s.data;throw Error(s.error||"Failed to create session")}catch(e){throw console.error("Failed to create session via API:",e),e}}async updateSession(e,s){if(this.useMockData){let a=P.findIndex(s=>s.id===e);if(-1===a)throw Error("Session not found");let t={...P[a],...s,updatedAt:new Date};return P[a]=t,this.clearCache(),t}try{let a=await S.updateSession(e,s);if(a.data)return this.clearCache(),a.data;throw Error(a.error||"Failed to update session")}catch(e){throw console.error("Failed to update session via API:",e),e}}async deleteSession(e){if(this.useMockData){let s=P.findIndex(s=>s.id===e);-1!==s&&(P.splice(s,1),this.clearCache());return}try{let s=await S.deleteSession(e);if(s.error)throw Error(s.error);this.clearCache()}catch(e){throw console.error("Failed to delete session via API:",e),e}}async healthCheck(){try{return!(await S.healthCheck()).error}catch(e){return console.error("Health check failed:",e),!1}}setUseMockData(e){this.useMockData=e,this.clearCache()}isUsingMockData(){return this.useMockData}constructor(){this.useMockData=!0,this.cache=new Map,this.cacheTimeout=3e5}}let L=new Z,E=r.forwardRef((e,s)=>{let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:l("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});E.displayName="Input";let F=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("label",{ref:s,className:l("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});F.displayName="Label";let T=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:l("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});T.displayName="Textarea";let q=r.forwardRef((e,s)=>{let{className:a,children:r,onValueChange:i,onChange:n,...c}=e;return(0,t.jsx)("select",{className:l("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,onChange:e=>{i&&i(e.target.value),n&&n(e)},...c,children:r})});q.displayName="Select";let M=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("select",{className:l("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i,children:r})});M.displayName="SelectTrigger";let R=r.forwardRef((e,s)=>{let{className:a,children:r,placeholder:i,...n}=e;return(0,t.jsx)("div",{ref:s,className:l("text-sm",a),...n,children:r||i})});R.displayName="SelectValue";let U=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:l("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md",a),...i,children:r})});U.displayName="SelectContent";let B=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("option",{ref:s,className:l("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:r})});B.displayName="SelectItem";var O=a(1397),z=a(3116);let H=["Forgotten Realms","Eberron","Ravenloft","Greyhawk","Dragonlance","Dark Sun","Planescape","Custom Setting"];function V(e){var s;let{campaign:a,onSave:i,onCancel:n}=e,[l,u]=(0,r.useState)({name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",setting:(null==a?void 0:a.setting)||"",isActive:null===(s=null==a?void 0:a.isActive)||void 0===s||s});return(0,t.jsxs)(c,{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:a?"Edit Campaign":"Create New Campaign"}),(0,t.jsx)(h,{children:a?"Update your campaign details":"Set up a new D&D adventure"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...l,id:(null==a?void 0:a.id)||crypto.randomUUID(),createdAt:(null==a?void 0:a.createdAt)||new Date,updatedAt:new Date})},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"name",children:"Campaign Name"}),(0,t.jsx)(E,{id:"name",value:l.name,onChange:e=>u({...l,name:e.target.value}),placeholder:"Enter campaign name...",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"description",children:"Description"}),(0,t.jsx)(T,{id:"description",value:l.description,onChange:e=>u({...l,description:e.target.value}),placeholder:"Describe your campaign...",rows:4,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"setting",children:"Campaign Setting"}),(0,t.jsxs)(q,{value:l.setting,onValueChange:e=>u({...l,setting:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select a campaign setting..."})}),(0,t.jsx)(U,{children:H.map(e=>(0,t.jsx)(B,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:e=>u({...l,isActive:e.target.checked}),className:"rounded border-border"}),(0,t.jsx)(F,{htmlFor:"isActive",children:"Active Campaign"}),(0,t.jsx)(f,{variant:l.isActive?"default":"secondary",children:l.isActive?"Active":"Inactive"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(g,{type:"submit",className:"flex-1",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),a?"Update Campaign":"Create Campaign"]}),(0,t.jsxs)(g,{type:"button",variant:"outline",onClick:n,children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]})}let G=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:l("overflow-auto",a),...i,children:r})});G.displayName="ScrollArea";let W=e=>{let{open:s,onOpenChange:a,children:r}=e;return s?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:()=>null==a?void 0:a(!1)}),(0,t.jsx)("div",{className:"relative z-50",children:r})]}):null},J=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:l("relative w-full max-w-lg rounded-lg bg-background p-6 shadow-lg",a),...i,children:r})});J.displayName="DialogContent";let Y=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:l("flex flex-col space-y-1.5 text-center sm:text-left",a),...i,children:r})});Y.displayName="DialogHeader";let _=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("h2",{ref:s,className:l("text-lg font-semibold leading-none tracking-tight",a),...i,children:r})});_.displayName="DialogTitle";let K=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("p",{ref:s,className:l("text-sm text-muted-foreground",a),...i,children:r})});K.displayName="DialogDescription";let Q=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("button",{ref:s,className:l("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a),...i,children:r})});Q.displayName="DialogTrigger";var X=a(5189),$=a(3778),ee=a(2592),es=a(1996),ea=a(3527);function et(e){let{campaign:s,onSessionSelect:a}=e,[i,n]=(0,r.useState)(P.filter(e=>e.campaignId===s.id)),[l,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)({name:"",description:""}),j=e=>{n(i.map(s=>({...s,isActive:s.id===e.id}))),a&&a({...e,isActive:!0})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-bold",children:"Sessions"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your campaign sessions"})]}),(0,t.jsxs)(W,{open:l,onOpenChange:u,children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(g,{children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"New Session"]})}),(0,t.jsxs)(J,{children:[(0,t.jsxs)(Y,{children:[(0,t.jsx)(_,{children:"Create New Session"}),(0,t.jsxs)(K,{children:["Add a new session to ",s.name]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"session-name",children:"Session Name"}),(0,t.jsx)(E,{id:"session-name",value:x.name,onChange:e=>p({...x,name:e.target.value}),placeholder:"Enter session name..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"session-description",children:"Description"}),(0,t.jsx)(T,{id:"session-description",value:x.description,onChange:e=>p({...x,description:e.target.value}),placeholder:"Describe what happens in this session...",rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g,{onClick:()=>{if(!x.name.trim())return;let e={id:crypto.randomUUID(),campaignId:s.id,name:x.name,description:x.description,date:new Date,sessionNumber:i.length+1,isCompleted:!1,createdAt:new Date,updatedAt:new Date,isActive:!1};n([...i,e]),p({name:"",description:""}),u(!1)},className:"flex-1",children:"Create Session"}),(0,t.jsx)(g,{variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]})]})]})]}),(0,t.jsx)(G,{className:"h-96",children:(0,t.jsx)("div",{className:"space-y-4",children:0===i.length?(0,t.jsx)(c,{children:(0,t.jsx)(m,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)($.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"No Sessions Yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first session to start playing!"}),(0,t.jsxs)(g,{onClick:()=>u(!0),children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Create First Session"]})]})})}):i.map(e=>(0,t.jsxs)(c,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(f,{variant:"outline",children:["Session ",e.sessionNumber]}),e.isActive&&(0,t.jsxs)(f,{className:"bg-green-500 hover:bg-green-600",children:[(0,t.jsx)(ee.Z,{className:"h-3 w-3 mr-1"}),"Active"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(es.Z,{className:"h-4 w-4"}),e.createdAt.toLocaleDateString()]})]}),(0,t.jsx)(o,{className:"text-lg",children:e.name}),(0,t.jsx)(h,{children:e.description})]}),(0,t.jsxs)(m,{children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(g,{size:"sm",onClick:()=>j(e),disabled:e.isActive,children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),e.isActive?"Currently Playing":"Start Session"]}),(0,t.jsxs)(g,{size:"sm",variant:"outline",children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),e.summary&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[(0,t.jsx)("h5",{className:"font-semibold text-sm mb-1",children:"Session Summary:"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.summary})]})]})]},e.id))})})]})}var er=a(7266);let ei=["Human","Elf","Dwarf","Halfling","Dragonborn","Gnome","Half-Elf","Half-Orc","Tiefling","Aasimar","Genasi","Goliath","Tabaxi"],en=["Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Warlock","Wizard","Artificer"],el=["Acolyte","Criminal","Folk Hero","Noble","Sage","Soldier","Charlatan","Entertainer","Guild Artisan","Hermit","Outlander","Sailor"],ec=["Lawful Good","Neutral Good","Chaotic Good","Lawful Neutral","True Neutral","Chaotic Neutral","Lawful Evil","Neutral Evil","Chaotic Evil"],ed=["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"];function eo(e){let{character:s,onSave:a,onCancel:i}=e,[n,l]=(0,r.useState)({name:(null==s?void 0:s.name)||"",race:(null==s?void 0:s.race)||"",class:(null==s?void 0:s.class)||"",level:(null==s?void 0:s.level)||1,background:(null==s?void 0:s.background)||"",alignment:(null==s?void 0:s.alignment)||"",currentLocation:(null==s?void 0:s.currentLocation)||"",stats:(null==s?void 0:s.stats)||{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},hitPoints:(null==s?void 0:s.hitPoints)||{current:8,maximum:8},armorClass:(null==s?void 0:s.armorClass)||10,proficiencyBonus:(null==s?void 0:s.proficiencyBonus)||2,skills:(null==s?void 0:s.skills)||[],equipment:(null==s?void 0:s.equipment)||[],spells:(null==s?void 0:s.spells)||[],backstory:(null==s?void 0:s.backstory)||""}),u=e=>Math.floor((e-10)/2),x=e=>{let s=n.skills.includes(e)?n.skills.filter(s=>s!==e):[...n.skills,e];l({...n,skills:s})};return(0,t.jsxs)(c,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:s?"Edit Character":"Create New Character"}),(0,t.jsx)(h,{children:s?"Update your character details":"Build your D&D character"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a({...n,id:(null==s?void 0:s.id)||crypto.randomUUID(),createdAt:(null==s?void 0:s.createdAt)||new Date,updatedAt:new Date})},className:"space-y-6",children:[(0,t.jsxs)(N,{defaultValue:"basic",className:"space-y-4",children:[(0,t.jsxs)(y,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(b,{value:"basic",children:"Basic Info"}),(0,t.jsx)(b,{value:"stats",children:"Stats & Skills"}),(0,t.jsx)(b,{value:"equipment",children:"Equipment"}),(0,t.jsx)(b,{value:"backstory",children:"Backstory"})]}),(0,t.jsxs)(w,{value:"basic",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"name",children:"Character Name"}),(0,t.jsx)(E,{id:"name",value:n.name,onChange:e=>l({...n,name:e.target.value}),placeholder:"Enter character name...",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"level",children:"Level"}),(0,t.jsx)(E,{id:"level",type:"number",min:"1",max:"20",value:n.level,onChange:e=>l({...n,level:Number.parseInt(e.target.value)||1})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"race",children:"Race"}),(0,t.jsxs)(q,{value:n.race,onValueChange:e=>l({...n,race:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select race..."})}),(0,t.jsx)(U,{children:ei.map(e=>(0,t.jsx)(B,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"class",children:"Class"}),(0,t.jsxs)(q,{value:n.class,onValueChange:e=>l({...n,class:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select class..."})}),(0,t.jsx)(U,{children:en.map(e=>(0,t.jsx)(B,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"background",children:"Background"}),(0,t.jsxs)(q,{value:n.background,onValueChange:e=>l({...n,background:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select background..."})}),(0,t.jsx)(U,{children:el.map(e=>(0,t.jsx)(B,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"alignment",children:"Alignment"}),(0,t.jsxs)(q,{value:n.alignment,onValueChange:e=>l({...n,alignment:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select alignment..."})}),(0,t.jsx)(U,{children:ec.map(e=>(0,t.jsx)(B,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"currentLocation",children:"Current Location"}),(0,t.jsx)(E,{id:"currentLocation",value:n.currentLocation,onChange:e=>l({...n,currentLocation:e.target.value}),placeholder:"Where is your character currently located?"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"hp-current",children:"Current HP"}),(0,t.jsx)(E,{id:"hp-current",type:"number",min:"0",value:n.hitPoints.current,onChange:e=>l({...n,hitPoints:{...n.hitPoints,current:Number.parseInt(e.target.value)||0}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"hp-max",children:"Maximum HP"}),(0,t.jsx)(E,{id:"hp-max",type:"number",min:"1",value:n.hitPoints.maximum,onChange:e=>l({...n,hitPoints:{...n.hitPoints,maximum:Number.parseInt(e.target.value)||1}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"ac",children:"Armor Class"}),(0,t.jsx)(E,{id:"ac",type:"number",min:"1",value:n.armorClass,onChange:e=>l({...n,armorClass:Number.parseInt(e.target.value)||10})})]})]})]}),(0,t.jsxs)(w,{value:"stats",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Ability Scores"}),(0,t.jsxs)(g,{type:"button",variant:"outline",onClick:()=>{let e=()=>{let e=Array.from({length:4},()=>Math.floor(6*Math.random())+1);return e.sort((e,s)=>s-e),e.slice(0,3).reduce((e,s)=>e+s,0)};l({...n,stats:{strength:e(),dexterity:e(),constitution:e(),intelligence:e(),wisdom:e(),charisma:e()}})},children:[(0,t.jsx)(er.Z,{className:"h-4 w-4 mr-2"}),"Roll Stats"]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(n.stats).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:s,className:"capitalize",children:s}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(E,{id:s,type:"number",min:"1",max:"20",value:a,onChange:e=>l({...n,stats:{...n.stats,[s]:Number.parseInt(e.target.value)||10}}),className:"flex-1"}),(0,t.jsxs)("div",{className:"w-16 flex items-center justify-center bg-muted rounded-md text-sm font-medium",children:[u(a)>=0?"+":"",u(a)]})]})]},s)})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Skills"}),(0,t.jsx)("div",{className:"grid gap-2 md:grid-cols-3",children:ed.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:e,checked:n.skills.includes(e),onChange:()=>x(e),className:"rounded border-border"}),(0,t.jsx)(F,{htmlFor:e,className:"text-sm",children:e})]},e))})]})]}),(0,t.jsxs)(w,{value:"equipment",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"equipment",children:"Equipment (one per line)"}),(0,t.jsx)(T,{id:"equipment",value:n.equipment.join("\n"),onChange:e=>l({...n,equipment:e.target.value.split("\n").filter(e=>e.trim())}),placeholder:"Longsword Chain Mail Shield Backpack",rows:8})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"spells",children:"Spells (one per line)"}),(0,t.jsx)(T,{id:"spells",value:n.spells.join("\n"),onChange:e=>l({...n,spells:e.target.value.split("\n").filter(e=>e.trim())}),placeholder:"Magic Missile Shield Cure Wounds",rows:6})]})]}),(0,t.jsx)(w,{value:"backstory",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"backstory",children:"Character Backstory"}),(0,t.jsx)(T,{id:"backstory",value:n.backstory,onChange:e=>l({...n,backstory:e.target.value}),placeholder:"Tell your character's story...",rows:10})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(g,{type:"submit",className:"flex-1",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),s?"Update Character":"Create Character"]}),(0,t.jsxs)(g,{type:"button",variant:"outline",onClick:i,children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]})}let eh=r.forwardRef((e,s)=>{let{className:a,value:r=0,max:i=100,...n}=e;return(0,t.jsx)("div",{ref:s,className:l("relative h-2 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,t.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{width:"".concat(r/i*100,"%")}})})});eh.displayName="Progress";var em=a(5758),eu=a(432),ex=a(4275),ep=a(7329),eg=a(9198),ej=a(507),ef=a(8755);function ev(e){let{character:s,onEdit:a}=e,r=e=>{let s=Math.floor((e-10)/2);return s>=0?"+".concat(s):"".concat(s)},i=s.hitPoints.current/s.hitPoints.maximum*100;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c,{children:(0,t.jsx)(d,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o,{className:"text-2xl",children:s.name}),(0,t.jsxs)(h,{className:"text-lg",children:["Level ",s.level," ",s.race," ",s.class]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f,{variant:"outline",children:s.background}),(0,t.jsx)(f,{variant:"secondary",children:s.alignment}),s.currentLocation&&(0,t.jsxs)(f,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(em.Z,{className:"h-3 w-3"}),s.currentLocation]})]})]})}),a&&(0,t.jsxs)(g,{variant:"outline",onClick:a,children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})]})})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{className:"pb-3",children:(0,t.jsxs)(o,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(eu.Z,{className:"h-4 w-4 text-red-500"}),"Hit Points"]})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:s.hitPoints.current}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["/ ",s.hitPoints.maximum]})]}),(0,t.jsx)(eh,{value:i,className:"h-2"})]})})]}),(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{className:"pb-3",children:(0,t.jsxs)(o,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(ex.Z,{className:"h-4 w-4 text-blue-500"}),"Armor Class"]})}),(0,t.jsx)(m,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.armorClass})})]}),(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{className:"pb-3",children:(0,t.jsxs)(o,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(ep.Z,{className:"h-4 w-4 text-yellow-500"}),"Proficiency Bonus"]})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["+",s.proficiencyBonus]})})]})]}),(0,t.jsxs)(N,{defaultValue:"stats",className:"space-y-4",children:[(0,t.jsxs)(y,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(b,{value:"stats",className:"flex items-center gap-2",children:[(0,t.jsx)(eg.Z,{className:"h-4 w-4"}),"Stats"]}),(0,t.jsxs)(b,{value:"skills",className:"flex items-center gap-2",children:[(0,t.jsx)(ep.Z,{className:"h-4 w-4"}),"Skills"]}),(0,t.jsxs)(b,{value:"equipment",className:"flex items-center gap-2",children:[(0,t.jsx)(ej.Z,{className:"h-4 w-4"}),"Equipment"]}),(0,t.jsxs)(b,{value:"backstory",className:"flex items-center gap-2",children:[(0,t.jsx)(ef.Z,{className:"h-4 w-4"}),"Backstory"]})]}),(0,t.jsx)(w,{value:"stats",children:(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Ability Scores"})}),(0,t.jsx)(m,{children:(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(s.stats).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-muted-foreground capitalize mb-1",children:s}),(0,t.jsx)("div",{className:"text-2xl font-bold mb-1",children:a}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:r(a)})]},s)})})})]})}),(0,t.jsx)(w,{value:"skills",children:(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:"Proficient Skills"}),(0,t.jsx)(h,{children:"Skills your character is trained in"})]}),(0,t.jsx)(m,{children:s.skills.length>0?(0,t.jsx)("div",{className:"grid gap-2 md:grid-cols-2",children:s.skills.map(e=>(0,t.jsx)(f,{variant:"secondary",className:"justify-start",children:e},e))}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No proficient skills selected."})})]})}),(0,t.jsxs)(w,{value:"equipment",className:"space-y-4",children:[(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Equipment"})}),(0,t.jsx)(m,{children:s.equipment.length>0?(0,t.jsx)("div",{className:"space-y-2",children:s.equipment.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[(0,t.jsx)(ej.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e})]},s))}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No equipment listed."})})]}),s.spells&&s.spells.length>0&&(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Spells"})}),(0,t.jsx)(m,{children:(0,t.jsx)("div",{className:"space-y-2",children:s.spells.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[(0,t.jsx)(ef.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e})]},s))})})]})]}),(0,t.jsx)(w,{value:"backstory",children:(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Character Backstory"})}),(0,t.jsx)(m,{children:s.backstory?(0,t.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:s.backstory})}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No backstory written yet."})})]})})]})]})}let eN=[{value:"city",label:"City",description:"Towns, villages, and urban settlements"},{value:"dungeon",label:"Dungeon",description:"Caves, ruins, and underground complexes"},{value:"wilderness",label:"Wilderness",description:"Forests, mountains, and natural areas"},{value:"building",label:"Building",description:"Taverns, shops, and specific structures"},{value:"other",label:"Other",description:"Unique or special locations"}];function ey(e){let{location:s,onSave:a,onCancel:i,availableLocations:n=[]}=e,[l,u]=(0,r.useState)({name:(null==s?void 0:s.name)||"",type:(null==s?void 0:s.type)||"city",description:(null==s?void 0:s.description)||"",inhabitants:(null==s?void 0:s.inhabitants)||[],connections:(null==s?void 0:s.connections)||[]}),[x,p]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),N=()=>{x.trim()&&(u({...l,inhabitants:[...l.inhabitants,x.trim()]}),p(""))},y=e=>{u({...l,inhabitants:l.inhabitants.filter((s,a)=>a!==e)})},b=e=>{u({...l,connections:l.connections.filter(s=>s!==e)})},w=e=>{let s=n.find(s=>s.id===e);return s?s.name:"Unknown Location"},C=n.filter(e=>e.id!==(null==s?void 0:s.id)&&!l.connections.includes(e.id));return(0,t.jsxs)(c,{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:s?"Edit Location":"Create New Location"}),(0,t.jsx)(h,{children:s?"Update your location details":"Build a new location for your world"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a({...l,id:(null==s?void 0:s.id)||crypto.randomUUID(),createdAt:(null==s?void 0:s.createdAt)||new Date,updatedAt:new Date})},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"name",children:"Location Name"}),(0,t.jsx)(E,{id:"name",value:l.name,onChange:e=>u({...l,name:e.target.value}),placeholder:"Enter location name...",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"type",children:"Location Type"}),(0,t.jsxs)(q,{value:l.type,onValueChange:e=>u({...l,type:e}),children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select location type..."})}),(0,t.jsx)(U,{children:eN.map(e=>(0,t.jsx)(B,{value:e.value,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.label}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.description})]})},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{htmlFor:"description",children:"Description"}),(0,t.jsx)(T,{id:"description",value:l.description,onChange:e=>u({...l,description:e.target.value}),placeholder:"Describe this location...",rows:4,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(F,{children:"Inhabitants"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(E,{value:x,onChange:e=>p(e.target.value),placeholder:"Add inhabitant name...",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),N())}),(0,t.jsx)(g,{type:"button",onClick:N,size:"sm",children:(0,t.jsx)(X.Z,{className:"h-4 w-4"})})]}),l.inhabitants.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Current inhabitants:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:l.inhabitants.map((e,s)=>(0,t.jsxs)(f,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>y(s),className:"ml-1 hover:text-destructive",children:(0,t.jsx)(z.Z,{className:"h-3 w-3"})})]},s))})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(F,{children:"Connected Locations"}),C.length>0&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(q,{value:j,onValueChange:v,children:[(0,t.jsx)(M,{className:"flex-1",children:(0,t.jsx)(R,{placeholder:"Select location to connect..."})}),(0,t.jsx)(U,{children:C.map(e=>(0,t.jsxs)(B,{value:e.id,children:[e.name," (",e.type,")"]},e.id))})]}),(0,t.jsx)(g,{type:"button",onClick:()=>{j&&!l.connections.includes(j)&&(u({...l,connections:[...l.connections,j]}),v(""))},size:"sm",disabled:!j,children:(0,t.jsx)(X.Z,{className:"h-4 w-4"})})]}),l.connections.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Connected to:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:l.connections.map(e=>(0,t.jsxs)(f,{variant:"outline",className:"flex items-center gap-1",children:[w(e),(0,t.jsx)("button",{type:"button",onClick:()=>b(e),className:"ml-1 hover:text-destructive",children:(0,t.jsx)(z.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(g,{type:"submit",className:"flex-1",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),s?"Update Location":"Create Location"]}),(0,t.jsxs)(g,{type:"button",variant:"outline",onClick:i,children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]})}var eb=a(8620),ew=a(961),eC=a(1844);let ek=e=>{switch(e){case"city":return"\uD83C\uDFD8";case"dungeon":return"\uD83C\uDFF0";case"wilderness":return"\uD83C\uDF32";case"building":return"\uD83C\uDFE2";default:return"\uD83D\uDCCD"}},eS=e=>{switch(e){case"city":return"bg-blue-500";case"dungeon":return"bg-red-500";case"wilderness":return"bg-green-500";case"building":return"bg-yellow-500";default:return"bg-gray-500"}};function eD(e){let{location:s,onBack:a,onEdit:r,allLocations:i=[]}=e,n=e=>{let s=i.find(s=>s.id===e);return s?s.name:"Unknown Location"},l=e=>{let s=i.find(s=>s.id===e);return s?s.type:"unknown"};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(g,{variant:"outline",size:"sm",onClick:a,children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Locations"]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat(eS(s.type)),children:(0,t.jsx)(em.Z,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:s.name}),(0,t.jsxs)(f,{variant:"outline",className:"capitalize",children:[ek(s.type)," ",s.type]})]})]})}),(0,t.jsxs)(g,{variant:"outline",onClick:r,children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit Location"]})]}),(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Location Overview"})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:s.description})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Location Details"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,t.jsx)(f,{variant:"outline",className:"capitalize",children:s.type})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,t.jsx)("span",{children:s.createdAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Last Updated:"}),(0,t.jsx)("span",{children:s.updatedAt.toLocaleDateString()})]})]})]})})]})})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(ew.Z,{className:"h-5 w-5"}),"Inhabitants"]}),(0,t.jsx)(h,{children:"Notable people and creatures in this location"})]}),(0,t.jsx)(m,{children:s.inhabitants&&s.inhabitants.length>0?(0,t.jsx)("div",{className:"space-y-2",children:s.inhabitants.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[(0,t.jsx)(ew.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e})]},s))}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No inhabitants listed for this location."})})]}),(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(eC.Z,{className:"h-5 w-5"}),"Connected Locations"]}),(0,t.jsx)(h,{children:"Places accessible from this location"})]}),(0,t.jsx)(m,{children:s.connections&&s.connections.length>0?(0,t.jsx)("div",{className:"space-y-2",children:s.connections.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[(0,t.jsx)("div",{className:"p-1 rounded ".concat(eS(l(e))),children:(0,t.jsx)(em.Z,{className:"h-3 w-3 text-white"})}),(0,t.jsx)("span",{children:n(e)}),(0,t.jsx)(f,{variant:"outline",className:"ml-auto capitalize text-xs",children:l(e)})]},e))}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"This location has no connections to other places."})})]})]}),(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:"Adventure Hooks & Notes"}),(0,t.jsx)(h,{children:"Ideas for adventures and important details"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(em.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Adventure hooks and notes coming soon..."})]})})]})]})}var eA=a(9775);function eI(e){let{campaign:s,characters:a,locations:i,onBack:n,onEdit:l,onPlaySession:u,onSaveCharacter:x,onSaveLocation:p}=e,[j,v]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),[S,D]=(0,r.useState)("list"),[A,I]=(0,r.useState)("list"),P=a.filter(e=>e.campaignId===s.id),Z=i.filter(e=>e.campaignId===s.id),L=()=>{v(null),D("create")},E=e=>{v(e),D("edit")},F=e=>{v(e),D("view")},T=()=>{k(null),I("create")},q=e=>{k(e),I("edit")},M=e=>{k(e),I("view")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(g,{variant:"outline",size:"sm",onClick:n,children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:s.name}),(0,t.jsx)(f,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:s.setting})]}),(0,t.jsxs)(g,{variant:"outline",onClick:l,children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit Campaign"]})]}),(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(o,{children:"Campaign Overview"})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:s.description})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Campaign Details"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Setting:"}),(0,t.jsx)("span",{children:s.setting})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,t.jsx)("span",{children:s.createdAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Last Updated:"}),(0,t.jsx)("span",{children:s.updatedAt.toLocaleDateString()})]})]})]})})]})})]}),(0,t.jsxs)(N,{defaultValue:"sessions",className:"space-y-4",children:[(0,t.jsxs)(y,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(b,{value:"sessions",className:"flex items-center gap-2",children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4"}),"Sessions"]}),(0,t.jsxs)(b,{value:"characters",className:"flex items-center gap-2",children:[(0,t.jsx)(ew.Z,{className:"h-4 w-4"}),"Characters"]}),(0,t.jsxs)(b,{value:"locations",className:"flex items-center gap-2",children:[(0,t.jsx)(em.Z,{className:"h-4 w-4"}),"Locations"]}),(0,t.jsxs)(b,{value:"settings",className:"flex items-center gap-2",children:[(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),"Settings"]})]}),(0,t.jsx)(w,{value:"sessions",children:(0,t.jsx)(et,{campaign:s,onSessionSelect:u})}),(0,t.jsx)(w,{value:"characters",children:"create"===S||"edit"===S?(0,t.jsx)(eo,{character:j||void 0,onSave:e=>{x({...e,campaignId:s.id}),D("list"),v(null)},onCancel:()=>D("list")}):"view"===S&&j?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(g,{variant:"outline",onClick:()=>D("list"),children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Characters"]}),(0,t.jsx)(ev,{character:j,onEdit:()=>E(j)})]}):(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o,{children:"Campaign Characters"}),(0,t.jsx)(h,{children:"Manage player characters and NPCs for this campaign"})]}),(0,t.jsxs)(g,{onClick:L,children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Add Character"]})]})}),(0,t.jsx)(m,{children:0===P.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(ew.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No characters in this campaign yet."}),(0,t.jsx)(g,{onClick:L,children:"Create First Character"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:P.map(e=>(0,t.jsxs)(c,{className:"bg-card border-2 border-orange-500",children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{className:"text-center text-lg",children:e.name}),(0,t.jsxs)(h,{className:"text-center",children:["Level ",e.level," ",e.race," ",e.class]})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"HP:"}),(0,t.jsxs)("span",{children:[e.hitPoints.current,"/",e.hitPoints.maximum]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"AC:"}),(0,t.jsx)("span",{children:e.armorClass})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)(g,{size:"sm",variant:"outline",onClick:()=>E(e),children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,t.jsx)(g,{size:"sm",onClick:()=>F(e),children:"View"})]})]})})]},e.id))})})]})}),(0,t.jsx)(w,{value:"locations",children:"create"===A||"edit"===A?(0,t.jsx)(ey,{location:C||void 0,onSave:e=>{p({...e,campaignId:s.id}),I("list"),k(null)},onCancel:()=>I("list"),availableLocations:Z}):"view"===A&&C?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(g,{variant:"outline",onClick:()=>I("list"),children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Locations"]}),(0,t.jsx)(eD,{location:C,onBack:()=>I("list"),onEdit:()=>q(C),allLocations:Z})]}):(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o,{children:"Campaign Locations"}),(0,t.jsx)(h,{children:"Manage locations and world-building for this campaign"})]}),(0,t.jsxs)(g,{onClick:T,children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Add Location"]})]})}),(0,t.jsx)(m,{children:0===Z.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(em.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No locations in this campaign yet."}),(0,t.jsx)(g,{onClick:T,children:"Create First Location"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Z.map(e=>(0,t.jsxs)(c,{className:"bg-card border-2 border-orange-500",children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(o,{className:"text-lg",children:e.name}),(0,t.jsx)(f,{variant:"outline",className:"capitalize",children:e.type})]}),(0,t.jsx)(h,{children:e.description})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[e.inhabitants&&e.inhabitants.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Inhabitants:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.inhabitants.slice(0,2).map((e,s)=>(0,t.jsx)(f,{variant:"secondary",className:"text-xs",children:e},s)),e.inhabitants.length>2&&(0,t.jsxs)(f,{variant:"secondary",className:"text-xs",children:["+",e.inhabitants.length-2," more"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)(g,{size:"sm",variant:"outline",onClick:()=>q(e),children:[(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,t.jsx)(g,{size:"sm",onClick:()=>M(e),children:"View"})]})]})})]},e.id))})})]})}),(0,t.jsx)(w,{value:"settings",children:(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:"Campaign Settings"}),(0,t.jsx)(h,{children:"Configure campaign rules and preferences"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(eA.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Campaign settings coming soon..."})]})})]})})]})]})}let eP=r.forwardRef((e,s)=>{let{className:a,src:r,alt:i,fallback:n,...c}=e;return(0,t.jsx)("div",{ref:s,className:l("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...c,children:r?(0,t.jsx)("img",{src:r,alt:i,className:"aspect-square h-full w-full"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-full bg-muted",children:(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:n||"U"})})})});eP.displayName="Avatar";let eZ=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:l("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...i,children:r})});eZ.displayName="AvatarFallback";var eL=a(9304),eE=a(3619),eF=a(9740),eT=a(831),eq=a(6824),eM=a(2542);let eR=[{label:"d20",dice:"1d20"},{label:"d12",dice:"1d12"},{label:"d10",dice:"1d10"},{label:"d8",dice:"1d8"},{label:"d6",dice:"1d6"},{label:"d4",dice:"1d4"},{label:"2d6",dice:"2d6"},{label:"3d6",dice:"3d6"},{label:"4d6",dice:"4d6"}];function eU(e){let{onRoll:s,className:a}=e,[i,n]=(0,r.useState)(""),[l,h]=(0,r.useState)(0),[u,x]=(0,r.useState)(null),p=e=>{let s=e.match(/^(\d+)?d(\d+)$/i);if(!s)return null;let a=Number.parseInt(s[1]||"1"),t=Number.parseInt(s[2]);return a<1||a>100||t<2||t>100?null:{count:a,sides:t}},j=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=p(e);if(!t)return;let r=[];for(let e=0;e<t.count;e++)r.push(Math.floor(Math.random()*t.sides)+1);let i=r.reduce((e,s)=>e+s,0),n={dice:e,rolls:r,total:i,modifier:a,finalTotal:i+a};x(n),s(n)},v=()=>{i.trim()&&j(i.trim(),l)},N=e=>{switch(e){case 1:return(0,t.jsx)(eL.Z,{className:"h-4 w-4"});case 2:return(0,t.jsx)(eE.Z,{className:"h-4 w-4"});case 3:return(0,t.jsx)(eF.Z,{className:"h-4 w-4"});case 4:return(0,t.jsx)(eT.Z,{className:"h-4 w-4"});case 5:return(0,t.jsx)(eq.Z,{className:"h-4 w-4"});case 6:return(0,t.jsx)(er.Z,{className:"h-4 w-4"});default:return(0,t.jsx)(eM.Z,{className:"h-4 w-4"})}};return(0,t.jsxs)(c,{className:a,children:[(0,t.jsx)(d,{children:(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(eM.Z,{className:"h-5 w-5"}),"Dice Roller"]})}),(0,t.jsxs)(m,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-2",children:"Quick Rolls"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:eR.map(e=>(0,t.jsx)(g,{variant:"outline",size:"sm",onClick:()=>j(e.dice,l),className:"text-xs",children:e.label},e.dice))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Custom Roll"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(E,{placeholder:"1d20, 3d6, etc.",value:i,onChange:e=>n(e.target.value),className:"flex-1",onKeyPress:e=>"Enter"===e.key&&v()}),(0,t.jsx)(E,{type:"number",placeholder:"Mod",value:l||"",onChange:e=>h(Number.parseInt(e.target.value)||0),className:"w-20"}),(0,t.jsx)(g,{onClick:v,size:"sm",children:"Roll"})]})]}),u&&(0,t.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Last Roll: ",u.dice]}),(0,t.jsx)(f,{variant:"outline",className:"text-lg font-bold",children:u.finalTotal})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:u.rolls.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[N(e),(0,t.jsx)("span",{children:e})]},s))}),0!==u.modifier&&(0,t.jsxs)("span",{children:[u.modifier>0?"+":"",u.modifier]}),(0,t.jsxs)("span",{children:["= ",u.finalTotal]})]})]})]})]})}var eB=a(7414),eO=a(7737);function ez(e){let{campaign:s,character:a,currentLocation:i,onLocationChange:n}=e,[l,h]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[p,j]=(0,r.useState)(!1),v=(0,r.useRef)(null),N=(0,r.useRef)(null);(0,r.useEffect)(()=>{h([{id:"1",sessionId:"current",sender:"dm",content:"Welcome to ".concat(s.name,", ").concat(a.name,"! You are a Level ").concat(a.level," ").concat(a.race," ").concat(a.class,". ").concat(i?"You find yourself in ".concat(i.name,". ").concat(i.description):"Your adventure begins now..."," What would you like to do?"),timestamp:new Date,type:"message"}])},[s,a,i]),(0,r.useEffect)(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[l]);let y=e=>{let s={...e,id:crypto.randomUUID(),sessionId:"current",timestamp:new Date};return h(e=>[...e,s]),s},b=async e=>{y({sender:"player",content:"Rolled ".concat(e.dice).concat(0!==e.modifier?" ".concat(e.modifier>0?"+":"").concat(e.modifier):"",": ").concat(e.finalTotal),type:"roll",metadata:{diceRoll:{dice:e.dice,result:e.finalTotal,modifier:e.modifier},characterId:a.id}}),j(!0),setTimeout(()=>{let e=["The dice clatter across the table... Your action succeeds!","An interesting result! The situation develops in an unexpected way.","Your roll determines the outcome. Something significant happens.","The fates smile upon you! Your action has the desired effect.","The dice have spoken. The story continues in a new direction."];y({sender:"dm",content:e[Math.floor(Math.random()*e.length)],type:"message"}),j(!1)},1500)},w=async e=>{j(!0),setTimeout(()=>{let e=["".concat(a.name," takes action. The world around you shifts and changes in response to your decision."),"Your bold move catches everyone's attention. The adventure takes an interesting turn.","As you act, the story unfolds in unexpected ways. New possibilities emerge.","The consequences of your action ripple through the world. What happens next?","Your character's decision shapes the narrative. The tale continues to evolve."];y({sender:"dm",content:e[Math.floor(Math.random()*e.length)],type:"message"}),j(!1)},2e3)},C=async()=>{if(!u.trim()||p)return;let e=u.trim();x(""),y({sender:"player",content:e,type:"action",metadata:{characterId:a.id}}),await w(e)},k=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"flex flex-col h-[600px] max-w-4xl mx-auto",children:[(0,t.jsx)(c,{className:"mb-4",children:(0,t.jsx)(d,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o,{className:"text-lg",children:s.name}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:[a.name," - Level ",a.level," ",a.race," ",a.class]}),i&&(0,t.jsxs)(f,{variant:"outline",className:"capitalize flex items-center gap-1",children:[(0,t.jsx)(em.Z,{className:"h-3 w-3"}),i.name]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eu.Z,{className:"h-4 w-4 text-red-500"}),(0,t.jsxs)("span",{children:[a.hitPoints.current,"/",a.hitPoints.maximum]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(ex.Z,{className:"h-4 w-4 text-blue-500"}),(0,t.jsx)("span",{children:a.armorClass})]})]})]})})}),(0,t.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,t.jsxs)(c,{className:"flex-1 flex flex-col",children:[(0,t.jsx)(d,{className:"pb-3",children:(0,t.jsxs)(o,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(eB.Z,{className:"h-5 w-5"}),"Adventure Chat",p&&(0,t.jsx)(f,{variant:"secondary",className:"text-xs",children:"AI Thinking..."})]})}),(0,t.jsxs)(m,{className:"flex-1 flex flex-col p-0",children:[(0,t.jsx)(G,{className:"flex-1 px-4",ref:v,children:(0,t.jsxs)("div",{className:"space-y-4 pb-4",children:[l.map(e=>(0,t.jsxs)("div",{className:"flex gap-3 ".concat("player"===e.sender?"flex-row-reverse":""),children:[(0,t.jsx)(eP,{className:"h-8 w-8",children:(0,t.jsx)(eZ,{children:"dm"===e.sender?(0,t.jsx)(eB.Z,{className:"h-4 w-4"}):(0,t.jsx)(eg.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex-1 max-w-[80%] ".concat("player"===e.sender?"text-right":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"dm"===e.sender?"Dungeon Master":a.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:k(e.timestamp)}),"roll"===e.type&&(0,t.jsxs)(f,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(eM.Z,{className:"h-3 w-3 mr-1"}),"Roll"]}),"action"===e.type&&(0,t.jsxs)(f,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(ej.Z,{className:"h-3 w-3 mr-1"}),"Action"]})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat("dm"===e.sender?"bg-muted":(e.type,"bg-primary text-primary-foreground")),children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})]})]},e.id)),p&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(eP,{className:"h-8 w-8",children:(0,t.jsx)(eZ,{children:(0,t.jsx)(eB.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Dungeon Master"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"thinking..."})]}),(0,t.jsx)("div",{className:"p-3 bg-muted rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})]})}),(0,t.jsxs)("div",{className:"border-t p-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(E,{ref:N,value:u,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())},placeholder:"Describe your action...",disabled:p,className:"flex-1"}),(0,t.jsx)(g,{onClick:C,disabled:!u.trim()||p,children:(0,t.jsx)(eO.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Press Enter to send  Describe what your character wants to do"})]})]})]}),(0,t.jsx)(eU,{onRoll:b,className:"w-80"})]})]})}function eH(e){let{campaigns:s,characters:a,locations:i,onBack:n}=e,[l,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(null),[j,v]=(0,r.useState)(null),[N,y]=(0,r.useState)(!1),b=s.filter(e=>e.isActive);return N&&l&&x?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(g,{variant:"outline",size:"sm",onClick:()=>y(!1),children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Setup"]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["Playing: ",l.name]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[x.name,"  ",(null==j?void 0:j.name)||"Unknown Location"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(g,{variant:"outline",size:"sm",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"Auto-Saved"]}),(0,t.jsxs)(g,{variant:"outline",onClick:()=>{y(!1),u(null),p(null),v(null),n()},children:[(0,t.jsx)(eA.Z,{className:"h-4 w-4 mr-2"}),"End Session"]})]})]}),(0,t.jsx)(ez,{campaign:l,character:x,currentLocation:j||void 0,onLocationChange:e=>{v(e)}})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(g,{variant:"outline",size:"sm",onClick:n,children:[(0,t.jsx)(eb.Z,{className:"h-4 w-4 mr-2"}),"Back to Overview"]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Start New Game Session"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Select your campaign and character to begin"})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(ee.Z,{className:"h-5 w-5"}),"Select Campaign"]}),(0,t.jsx)(h,{children:"Choose an active campaign to play"})]}),(0,t.jsx)(m,{className:"space-y-4",children:0===b.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(ee.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No active campaigns available."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a campaign first to start playing."})]}):(0,t.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==l?void 0:l.id)===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),onClick:()=>u(e),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)(f,{variant:"default",children:"Active"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.setting})]},e.id))})})]}),(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(ew.Z,{className:"h-5 w-5"}),"Select Character"]}),(0,t.jsx)(h,{children:"Choose your character for this session"})]}),(0,t.jsx)(m,{className:"space-y-4",children:0===a.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(ew.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No characters available."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a character first to start playing."})]}):(0,t.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==x?void 0:x.id)===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),onClick:()=>p(e),children:[(0,t.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Level ",e.level," ",e.race," ",e.class]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["HP: ",e.hitPoints.current,"/",e.hitPoints.maximum]}),(0,t.jsxs)("span",{children:["AC: ",e.armorClass]}),(0,t.jsx)(f,{variant:"outline",className:"text-xs",children:e.alignment})]})]},e.id))})})]})]}),l&&x&&i.length>0&&(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(em.Z,{className:"h-5 w-5"}),"Starting Location (Optional)"]}),(0,t.jsx)(h,{children:"Choose where your adventure begins"})]}),(0,t.jsx)(m,{children:(0,t.jsxs)(q,{value:(null==j?void 0:j.id)||"",onValueChange:e=>{v(i.find(s=>s.id===e)||null)},children:[(0,t.jsx)(M,{children:(0,t.jsx)(R,{placeholder:"Select starting location..."})}),(0,t.jsx)(U,{children:i.map(e=>(0,t.jsx)(B,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)(f,{variant:"outline",className:"capitalize text-xs",children:e.type})]})},e.id))})]})})]}),(0,t.jsx)(c,{children:(0,t.jsx)(m,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)(g,{size:"lg",onClick:()=>{l&&x&&(v(j||(i.length>0?i[0]:null)),y(!0))},disabled:!l||!x,className:"bg-primary hover:bg-primary/90",children:[(0,t.jsx)(ee.Z,{className:"h-5 w-5 mr-2"}),"Start Adventure"]}),(!l||!x)&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Please select both a campaign and character to begin"})]})})})]})}var eV=a(8002);function eG(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[u,x]=(0,r.useState)(null),[p,j]=(0,r.useState)(null),[v,C]=(0,r.useState)(null),[k,S]=(0,r.useState)("overview"),[D,A]=(0,r.useState)("campaigns");(0,r.useEffect)(()=>{(async()=>{try{let[e,a,t]=await Promise.all([L.getCampaigns(),L.getCharacters(),L.getLocations()]);s(e),i(a),l(t)}catch(e){console.error("Failed to load data:",e)}})()},[]);let I=()=>{x(null),S("create-campaign")},P=e=>{x(e||null),S("edit-campaign")},Z=async a=>{try{if(u){let t=await L.updateCampaign(u.id,a);s(e.map(e=>e.id===u.id?t:e))}else{let t=await L.createCampaign(a);s([...e,t])}S("overview"),x(null)}catch(e){console.error("Failed to save campaign:",e)}},E=e=>{x(e),S("campaign-detail")},F=e=>{j(e||null),S("edit-character")},T=async e=>{try{if(p){let s=await L.updateCharacter(p.id,e);i(a.map(e=>e.id===p.id?s:e))}else{let s=await L.createCharacter(e);i([...a,s])}S("overview"),j(null)}catch(e){console.error("Failed to save character:",e)}},q=e=>{C(e||null),S("edit-location")},M=async e=>{try{if(v){let s=await L.updateLocation(v.id,e);l(n.map(e=>e.id===v.id?s:e))}else{let s=await L.createLocation(e);l([...n,s])}S("overview"),C(null)}catch(e){console.error("Failed to save location:",e)}},R=()=>{S("overview"),x(null),j(null),C(null)};return"create-campaign"===k||"edit-campaign"===k?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"create-campaign"===k?"Create New Campaign":"Edit Campaign"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(V,{campaign:u||void 0,onSave:Z,onCancel:R})})]}):"create-character"===k||"edit-character"===k?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"create-character"===k?"Create New Character":"Edit Character"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(eo,{character:p||void 0,onSave:T,onCancel:R})})]}):"create-location"===k||"edit-location"===k?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"create-location"===k?"Create New Location":"Edit Location"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(ey,{location:v||void 0,onSave:M,onCancel:R,availableLocations:n})})]}):"character-sheet"===k&&p?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Character Sheet"})]})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(g,{variant:"outline",onClick:R,children:" Back to Overview"})}),(0,t.jsx)(ev,{character:p,onEdit:()=>F(p)})]})]}):"location-detail"===k&&v?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Location Details"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(eD,{location:v,onBack:R,onEdit:()=>q(v),allLocations:n})})]}):"campaign-detail"===k&&u?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Campaign Management"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(eI,{campaign:u,characters:a,locations:n,onBack:R,onEdit:()=>P(u),onPlaySession:e=>{console.log("Starting session:",e),S("game-session")},onSaveCharacter:T,onSaveLocation:M})})]}):"game-session"===k?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Game Session"})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(eH,{campaigns:e,characters:a,locations:n,onBack:R})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,t.jsx)(ej.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Dungeons & Dragons"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Your AI-powered tabletop adventure"})]})]}),(0,t.jsxs)(g,{className:"bg-primary hover:bg-primary/90",onClick:I,children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"New Campaign"]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)(N,{value:D,onValueChange:A,className:"space-y-6",children:[(0,t.jsxs)(y,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(b,{value:"campaigns",className:"flex items-center gap-2",children:[(0,t.jsx)(ej.Z,{className:"h-4 w-4"}),"Campaigns"]}),(0,t.jsxs)(b,{value:"play",className:"flex items-center gap-2",children:[(0,t.jsx)(eV.Z,{className:"h-4 w-4"}),"Play"]})]}),(0,t.jsxs)(w,{value:"campaigns",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-foreground",children:"Your Campaigns"}),(0,t.jsxs)(g,{variant:"outline",onClick:I,children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,t.jsxs)(c,{className:"bg-card border-2 border-orange-500 hover:shadow-lg hover:shadow-primary/10 transition-all cursor-pointer",children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(o,{className:"text-xl",children:e.name}),(0,t.jsx)(f,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]}),(0,t.jsx)(h,{children:e.description})]}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.setting}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g,{size:"sm",variant:"outline",onClick:()=>P(e),children:"Edit"}),(0,t.jsxs)(g,{size:"sm",onClick:()=>E(e),children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Manage"]})]})]})})]},e.id))})]}),(0,t.jsx)(w,{value:"play",className:"space-y-6",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(eV.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Begin Your Adventure"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Choose your campaign and character to start playing with your AI Dungeon Master. The AI will guide your story and play all the NPCs you encounter."}),(0,t.jsxs)(g,{size:"lg",className:"bg-primary hover:bg-primary/90",onClick:()=>{S("game-session")},children:[(0,t.jsx)(ee.Z,{className:"h-5 w-5 mr-2"}),"Start New Adventure"]})]})})]})})]})}}},function(e){e.O(0,[653,115,364,744],function(){return e(e.s=9907)}),_N_E=e.O()}]);